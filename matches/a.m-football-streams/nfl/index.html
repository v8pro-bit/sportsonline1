<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sportsonline | NFL</title>
    <link href="./style.css" rel="stylesheet" />
    <link rel="shortcut icon" href="./favicon.png" />
<style>body{margin:0;font-family:'Segoe UI',sans-serif;background-color:#0E1014;color:#e7ffe7}.main-header{padding:20px 30px;display:flex;justify-content:space-between;align-items:center;color:white;border-bottom:1px solid #2e3542;background-color:#1a1f28}.logo-container{display:flex;justify-content:center;align-items:center;flex-grow:1}.site-logo{font-size:36px;font-weight:800;color:#58a6ff;text-transform:uppercase;letter-spacing:3px;text-align:center;margin:0}.nav-links{display:flex;gap:20px}.nav-links a{font-size:18px;font-weight:600;color:white;text-decoration:none;position:relative;transition:color 0.3s ease}.nav-links a::after{content:'';position:absolute;bottom:-4px;left:0;width:100%;height:2px;background-color:#58a6ff;transform:scaleX(0);transform-origin:bottom right;transition:transform 0.3s ease}.nav-links a:hover{color:#58a6ff}.nav-links a:hover::after{transform:scaleX(1);transform-origin:bottom left}#pagination-controls{margin-bottom:15px;padding:12px;border-radius:8px;display:flex;flex-wrap:wrap;align-items:center;gap:10px;justify-content:space-between;flex-direction:row;color:#ddd;font-size:14px;width:91.7%;border:1px solid #2e3542;background-color:#232834}#pagination-controls .pagination-info{font-size:14px;color:#aaa;flex:1 0 100%;margin-bottom:8px}.pagination{display:flex;flex-wrap:wrap;gap:8px}.pagination button{color:#fff;border:none;padding:8px 14px;font-size:14px;border-radius:6px;cursor:pointer;transition:all 0.3s ease;background-color:#2b313d;border:1px solid #3a4150}.pagination button:hover{background-color:#4a5862;border-color:#5a6d78;cursor:pointer}.pagination button.active{background-color:#58a6ff;font-weight:bold;color:#fff}#pagination-controls label{font-size:14px;color:#ddd;display:flex;align-items:center;gap:6px}#pagination-controls select{padding:6px 10px;font-size:14px;color:#fff;border:none;border-radius:5px;appearance:none;cursor:pointer;background-color:#2b313d;border:1px solid #3a4150}#pagination-controls select:hover{background-color:#4a5862;border-color:#5a6d78;cursor:pointer}#pagination-summary{margin-bottom:10px;color:#ccc;font-size:14px}.team-logo{width:70px;height:auto;margin:0 90px;vertical-align:middle}.container{display:flex;justify-content:center;padding:30px 15px}.content-box{border-radius:8px;max-width:1250px;width:100%;display:flex;padding:20px;margin-top:20px;border:1px solid #2e3542;background-color:#1a1f28}.main-content{flex:1;padding-right:20px}.ad-top img{width:100%;max-width:728px;border-radius:6px;margin-bottom:20px;display:block}#searchBox{outline:none;padding:11px;color:white;border:1px solid #2e3542;background-color:#232834}#searchBox:focus{border:2px solid #58a6ff}.search{width:91.8%;padding:12px;font-size:16px;color:white;margin:15px 0;display:block;border:1px solid #2e3542;background-color:#232834}.match-card{padding:30px 20px;margin-bottom:15px;transition:all 0.2s ease;width:90%;cursor:pointer;border:1px solid #2e3542;background-color:#232834}.match-card:hover{background-color:#4a5862;border-color:#5a6d78}.match-league{color:#00ff66;font-size:22px;font-weight:bold;text-align:center;margin-bottom:-10px}.match-time{text-align:center;font-size:16px;color:#bbb;margin-top:-14px}.match-title{font-size:20px;font-weight:500;text-align:center;margin:8px 0;color:#ffffff}.sidebar{width:160px}.match-league-full{font-size:14px;color:#00ff88;margin-top:8px;text-align:center;font-weight:600;text-transform:uppercase}@media (max-width:768px){.main-header{flex-direction:column;align-items:flex-start;padding:15px 20px}.logo-container{justify-content:flex-start;width:100%;margin-bottom:10px}.site-logo{font-size:28px;text-align:left;letter-spacing:2px}.nav-links{width:100%;justify-content:flex-start;flex-wrap:wrap;gap:10px}.nav-links a{font-size:16px}.pagination{justify-content:center;gap:6px}.pagination button{padding:6px 10px;font-size:13px}#pagination-controls{flex-direction:column;align-items:flex-start;width:93%;padding:10px}#pagination-controls label{margin-top:10px;width:100%}.match-card{width:89%;padding:20px 15px}.match-title{font-size:15px;margin:12px 0}.match-league{font-size:15px}.match-time{font-size:12px}.team-logo{width:30px;margin:0 10px}.search{width:90%;font-size:15px}.content-box{flex-direction:column;padding:15px;margin:10px}.main-content{padding-right:0;width:100%}.sidebar{width:100%;margin-top:20px}.ad-top img{max-width:100%}.pagination-info{font-size:13px;text-align:center}#pagination-controls select{font-size:13px}#searchBox{width:93%}}</style>
</head>
<body>

    <div class="main-header">
        <div class="logo-container">
            <a href="/" style="text-decoration: none;">
                <h1 class="site-logo">SPORTSONLINE</h1>
            </a>
        </div>
        <nav class="nav-links">
            <a href="matches/soccer-streams/all">Soccer Streams</a>
            <a href="matches/a.m-football-streams/nfl">NFL Streams</a>
            <a href="matches/mix-material-arts/mma">MMA Streams</a>
            <a href="matches/basketball/nba">NBA Streams</a>
            <a href="matches/fighting/boxing">Boxing Streams</a>
            <a href="matches/baseball/mlb">BaseBall Streams</a>
        </nav>
    </div>


    <div class="container">
        <div class="content-box">
            <section class="main-content">
               <div class="ad-top"> <script type="text/javascript">
	atOptions = {
		'key' : '31037bfc95eea319827433190321bc99',
		'format' : 'iframe',
		'height' : 90,
		'width' : 728,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/31037bfc95eea319827433190321bc99/invoke.js"></script></div>
        <input type="text" class="search" id="searchBox" placeholder="Search team & League ..." onkeyup="filterMatches()">
        <div id="pagination-controls"></div>
        <div id="pagination-summary" class="pagination-info"></div>
        <div id="matches"></div>
      </section>
      <aside class="sidebar">

<script type="text/javascript">
	atOptions = {
		'key' : 'c056290ae6472fcc026e9aa3e4433ff2',
		'format' : 'iframe',
		'height' : 300,
		'width' : 160,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/c056290ae6472fcc026e9aa3e4433ff2/invoke.js"></script>

     <script type="text/javascript">
	atOptions = {
		'key' : '4ef2fc17a7faded8a267471f28b41d6f',
		'format' : 'iframe',
		'height' : 600,
		'width' : 160,
		'params' : {}
	};
</script>
<script type="text/javascript" src="//www.highperformanceformat.com/4ef2fc17a7faded8a267471f28b41d6f/invoke.js"></script>


      </aside>
        </div>
    </div>

<script>
  const apiUrl = "https://opensheet.elk.sh/1rAbb9FatONKR_xwYXQ-1H2FJ90JLe_gwlmWtBYvCQgs/Sheet1";
  const matchesContainer = document.getElementById("matches");
  const paginationContainer = document.getElementById("pagination-controls");
  const paginationSummary = document.getElementById("pagination-summary");

  let allMatches = [];
  let currentPage = 1;
  let matchesPerPage = 12;

  //  Get current page and limit from the URL query string
  function getCurrentPageFromURL() {
    const urlParams = new URLSearchParams(window.location.search);
    const page = parseInt(urlParams.get('page'));
    const limit = parseInt(urlParams.get('limit'));
    return {
      page: isNaN(page) ? 1 : page,
      limit: isNaN(limit) ? 12 : limit
    };
  }

  //  Update the URL without reloading the page
  function updatePageURL(page, limit) {
    const url = new URL(window.location);
    url.searchParams.set('page', page);
    url.searchParams.set('limit', limit);
    window.history.pushState({}, '', url);
  }

  //  Filter based on current page path
  function matchLeagueFilter(match) {
    const league = (match.LEAGUE || '').toLowerCase();
    const path = window.location.pathname.toLowerCase();

    if (path.includes("soccer-streams")) return league.includes("soccer");
    if (path.includes("a.m-football-streams/nfl")) return league.includes("nfl");
    if (path.includes("basketball/nba")) return league.includes("nba");
    if (path.includes("mix-material-arts/mma")) return league.includes("mma");
    if (path.includes("fighting/boxing")) return league.includes("boxing");
    if (path.includes("baseball/mlb")) return league.includes("mlb");

    return true; // if no specific league found, show all
  }

  //  Load and filter matches
  async function loadMatches() {
    const { page, limit } = getCurrentPageFromURL();
    currentPage = page;
    matchesPerPage = limit;

    const res = await fetch(apiUrl);
    const data = await res.json();
    allMatches = data.filter(match => match["TEAM 1"] && match["TEAM 2"]);
    allMatches = allMatches.filter(matchLeagueFilter); // filter by league

    renderMatches();
    renderPagination();
  }

  //  Time formatting
  function formatTime(raw) {
    try {
      const options = {
        month: 'long', day: 'numeric', year: 'numeric',
        hour: '2-digit', minute: '2-digit',
        timeZone: 'America/New_York', hour12: true
      };
      const date = new Date(raw);
      return new Intl.DateTimeFormat('en-US', options).format(date) + ' ET';
    } catch (e) {
      return raw;
    }
  }

  //  Render match cards
  function renderMatches() {
    matchesContainer.innerHTML = "";
    const start = (currentPage - 1) * matchesPerPage;
    const end = start + matchesPerPage;
    const filtered = getFilteredMatches();
    const currentMatches = filtered.slice(start, end);

    currentMatches.forEach(match => {
      const matchDiv = document.createElement("div");
      matchDiv.className = "match-link";
      matchDiv.setAttribute("data-league", match.LEAGUE || "");
      matchDiv.setAttribute("data-frame", match.IFRAME || "");

      matchDiv.innerHTML = `
        <div class="match-card">
          <div class="match-league">${match.LEAGUE || ""}</div>
          <div class="match-title">
            <img src="${match['LOGO 1']}" alt="${match['TEAM 1']}" class="team-logo" />
            ${match["TEAM 1"]} vs ${match["TEAM 2"]}
            <img src="${match['LOGO 2']}" alt="${match['TEAM 2']}" class="team-logo" />
          </div>
          <div class="match-time">${formatTime(match.TIME)}</div>
        </div>
      `;

      const globalIndex = allMatches.indexOf(match);
      matchDiv.addEventListener("click", () => {
        const frameLink = match.IFRAME;
        if (frameLink) {
          window.location.href = `/player.html?frame=${encodeURIComponent(frameLink)}&id=${globalIndex}`;
        }
      });

      matchesContainer.appendChild(matchDiv);
    });

    updatePaginationSummary(start + 1, Math.min(end, filtered.length), filtered.length);
  }

  //  Update pagination summary
  function updatePaginationSummary(start, end, total) {
    paginationSummary.innerHTML = `Showing <strong>${start}</strong> to <strong>${end}</strong> of <strong>${total}</strong> matches`;
  }

  //  Render pagination controls
  function renderPagination() {
    const filtered = getFilteredMatches();
    const totalPages = Math.ceil(filtered.length / matchesPerPage);
    paginationContainer.innerHTML = '';

    let html = `<div class="pagination-info">Page ${currentPage} of ${totalPages}</div>`;
    html += '<div class="pagination">';
    for (let i = 1; i <= totalPages; i++) {
      html += `<button onclick="goToPage(${i})" class="${i === currentPage ? 'active' : ''}">${i}</button>`;
    }
    html += `</div>
      <label>Show: <select onchange="changeLimit(this.value)">
        <option value="12" ${matchesPerPage == 12 ? 'selected' : ''}>12</option>
        <option value="20" ${matchesPerPage == 20 ? 'selected' : ''}>20</option>
        <option value="50" ${matchesPerPage == 50 ? 'selected' : ''}>50</option>
        <option value="80" ${matchesPerPage == 80 ? 'selected' : ''}>80</option>
        <option value="100" ${matchesPerPage == 100 ? 'selected' : ''}>100</option>
      </select></label>`;

    paginationContainer.innerHTML = html;
  }

  //  Go to page
  function goToPage(page) {
    currentPage = page;
    renderMatches();
    renderPagination();
    updatePageURL(page, matchesPerPage);
  }

  //  Change match limit per page
  function changeLimit(limit) {
    matchesPerPage = parseInt(limit);
    currentPage = 1;
    renderMatches();
    renderPagination();
    updatePageURL(currentPage, limit);
  }

  //  Filter matches by search
  function getFilteredMatches() {
    const input = document.getElementById('searchBox')?.value.toLowerCase() || '';
    return allMatches.filter(match => {
      const title = `${match["TEAM 1"]} vs ${match["TEAM 2"]}`.toLowerCase();
      const league = (match.LEAGUE || '').toLowerCase();
      return title.includes(input) || league.includes(input);
    });
  }

  function filterMatches() {
    currentPage = 1;
    renderMatches();
    renderPagination();
  }

  //  Initial load
  loadMatches();
</script>


    <script>
  // Wait till the page is loaded
  document.addEventListener('DOMContentLoaded', function () {
    // Select all anchor tags inside your menu or section
    const links = document.querySelectorAll('a[href^="matches/"]');

    links.forEach(link => {
      const href = link.getAttribute('href');

      // Make it absolute from root
      link.addEventListener('click', function (e) {
        e.preventDefault(); // stop default link behavior
        window.location.href = '/' + href; // force root path
      });
    });
  });
</script>

    <script type="text/javascript">
        var _Hasync = _Hasync || [];
        _Hasync.push(['Histats.start', '1,4915398,4,0,0,0,00010000']);
        _Hasync.push(['Histats.fasi', '1']);
        _Hasync.push(['Histats.track_hits', '']);
        (function () {
            var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
            hs.src = ('//s10.histats.com/js15_as.js');
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
        })();
    </script>
    <noscript><a href="/" target="_blank"><img src="//sstatic1.histats.com/0.gif?4915398&amp;101" alt="free stats"
                border="0" /></a></noscript>
</body>
</html>
